import{d as e,r as t,c as n,a as l,b as a,e as o,t as i,w as r,v as s,f as p,F as u,g as d,o as c,h as m,i as h,j as g}from"./vendor.98d5bc62.js";function v(e,t){const n=document.getElementById("canvas"),l=n.getContext("2d"),[a,o,i,r]=t;return n.width=i,n.height=r,console.log("Cropping image:",t),l.drawImage(e,...t,0,0,i,r),n.toDataURL()}!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(n){const l=new URL(e,location),a=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((n,o)=>{const i=new URL(e,l);if(self[t].moduleMap[i])return n(self[t].moduleMap[i]);const r=new Blob([`import * as m from '${i}';`,`${t}.moduleMap['${i}']=m;`],{type:"text/javascript"}),s=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(r),onerror(){o(new Error(`Failed to import: ${e}`)),a(s)},onload(){n(self[t].moduleMap[i]),a(s)}});document.head.appendChild(s)})),self[t].moduleMap={}}}("/dvd-cropper/assets/");var f=e({name:"Cropper",setup(){const e=t(null),l=t(-1),a=t(-1),o=t(.706),i=n((()=>a.value*o.value)),r=n((()=>l.value>2*i.value)),s=n((()=>l.value-2*i.value)),p=t(0),u=t(0),d=t([]);function c(){if(e.value){const t=new Image;t.onload=()=>{d.value=[],l.value=t.width,a.value=t.height;const e=[];e.push(i.value+p.value),r.value&&e.push(s.value-u.value),e.push(i.value),d.value=function(e,t,n){const l=[];let a=0;for(const o of t)l.push(v(e,[a,0,o,n])),a+=o;return l}(t,e,a.value)},t.src=e.value}}return{base64:e,onFileInput:function(t){const n=t.target.files[0];if(n){const t=new FileReader;t.addEventListener("load",(()=>{var n;e.value=(null==(n=t.result)?void 0:n.toString())||null,c()})),t.readAsDataURL(n)}},width:l,height:a,ratio:o,coverWidth:i,hasSpine:r,spineWidth:s,generatedBase64:d,extract:c,offsetLeft:p,offsetRight:u}}});const x={key:0},w=a("b",null,"Width:",-1),y=a("b",null,"Height:",-1),b=a("b",null,"Cover width:",-1),R=a("b",null,"Has spine:",-1),C=a("b",null,"Spine width:",-1),L={style:{"margin-top":"25px"}},U=a("div",null,[a("b",null,"Aspect ratio")],-1),S={style:{"margin-top":"25px"}},j=a("div",null,[a("b",null,"Pixel offsets")],-1),k=a("h3",{style:{"margin-top":"25px","margin-bottom":"5px"}},"Result",-1),M=a("div",{style:{"margin-bottom":"25px",opacity:"0.75"}}," Right-click -> save image as ",-1),F={style:{padding:"10px",background:"green",display:"flex","justify-content":"center"}},B={id:"canvas"};f.render=function(e,t,n,h,g,v){return c(),l(u,null,[a("input",{style:{"margin-bottom":"25px"},accept:"image/jpeg, image/png",type:"file",onChange:t[1]||(t[1]=(...t)=>e.onFileInput&&e.onFileInput(...t))},null,32),e.base64&&e.width&&e.height?(c(),l("div",x,[a("img",{style:{"max-width":"500px","margin-bottom":"25px"},src:e.base64},null,8,["src"]),a("div",null,[w,o(" "+i(e.width),1)]),a("div",null,[y,o(" "+i(e.height),1)]),a("div",null,[b,o(" "+i(Math.round(e.coverWidth)),1)]),a("div",null,[R,o(" "+i(e.hasSpine?"yes":"no"),1)]),a("div",null,[C,o(" "+i(e.hasSpine?Math.round(e.spineWidth):"-"),1)]),a("div",L,[U,r(a("input",{placeholder:"Set aspect ratio","onUpdate:modelValue":t[2]||(t[2]=t=>e.ratio=t),type:"text",style:{"margin-bottom":"25px"}},null,512),[[s,e.ratio,void 0,{number:!0}]]),a("button",{onClick:t[3]||(t[3]=(...t)=>e.extract&&e.extract(...t))},"Update")]),a("div",S,[j,r(a("input",{placeholder:"Set offset left","onUpdate:modelValue":t[4]||(t[4]=t=>e.offsetLeft=t),type:"number",style:{"margin-bottom":"25px","margin-right":"10px",width:"100px"}},null,512),[[s,e.offsetLeft,void 0,{number:!0}]]),e.hasSpine?r((c(),l("input",{key:0,placeholder:"Set offset right","onUpdate:modelValue":t[5]||(t[5]=t=>e.offsetRight=t),type:"number",style:{"margin-bottom":"25px",width:"100px"}},null,512)),[[s,e.offsetRight,void 0,{number:!0}]]):p("",!0)]),k,M,a("div",F,[(c(!0),l(u,null,d(e.generatedBase64,(e=>(c(),l("img",{key:e,style:{"margin-right":"10px","max-height":"500px"},src:e},null,8,["src"])))),128))])])):p("",!0),r(a("canvas",B,null,512),[[m,!1]])],64)};var I=e({name:"App",components:{Cropper:f}});const V={style:{display:"flex","flex-flow":"column wrap","justify-content":"center"}},W=a("div",{style:{"text-align":"center"}},[a("h3",{style:{"margin-bottom":"5px"}},"DVD Cropper")],-1),D=a("div",{style:{"text-align":"center","margin-bottom":"20px",opacity:"0.8"}},[a("a",{target:"blank",href:"https://github.com/porn-vault/dvd-cropper"},[a("svg",{style:{width:"24px",height:"24px","margin-right":"20px"},role:"img",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[a("title",null,"View source"),a("path",{d:"M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"})])]),a("a",{target:"blank",href:"https://www.patreon.com/pornvault"},[a("svg",{style:{width:"24px",height:"24px"},role:"img",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[a("title",null,"Support on Patreon"),a("path",{d:"M0 .48v23.04h4.22V.48zm15.385 0c-4.764 0-8.641 3.88-8.641 8.65 0 4.755 3.877 8.623 8.641 8.623 4.75 0 8.615-3.868 8.615-8.623C24 4.36 20.136.48 15.385.48z"})])])],-1),E={style:{"text-align":"center"}};I.render=function(e,t,n,o,i,r){const s=h("cropper");return c(),l("div",V,[W,D,a("div",E,[a(s)])])},g(I).mount("#app");
