import{d as e,r as t,c as n,a,b as l,e as o,t as i,w as r,v as s,F as p,f as u,g as c,o as d,h as m,i as h,j as v}from"./vendor.c71ab99e.js";function g(e,t){const n=document.getElementById("canvas"),a=n.getContext("2d"),[l,o,i,r]=t;return n.width=i,n.height=r,console.log("Cropping image:",t),a.drawImage(e,...t,0,0,i,r),n.toDataURL()}!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(n){const a=new URL(e,location),l=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((n,o)=>{const i=new URL(e,a);if(self[t].moduleMap[i])return n(self[t].moduleMap[i]);const r=new Blob([`import * as m from '${i}';`,`${t}.moduleMap['${i}']=m;`],{type:"text/javascript"}),s=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(r),onerror(){o(new Error(`Failed to import: ${e}`)),l(s)},onload(){n(self[t].moduleMap[i]),l(s)}});document.head.appendChild(s)})),self[t].moduleMap={}}}("/dvd-cropper/assets/");var w=e({name:"Cropper",setup(){const e=t(null),a=t(-1),l=t(-1),o=t(.706),i=n((()=>l.value*o.value)),r=n((()=>a.value>2*i.value)),s=n((()=>a.value-2*i.value)),p=t([]);function u(){if(e.value){p.value=[];const t=new Image;t.onload=()=>{p.value=[],a.value=t.width,l.value=t.height;const e=[];e.push(i.value),r.value&&e.push(s.value),e.push(i.value),p.value=function(e,t,n){const a=[];let l=0;for(const o of t)a.push(g(e,[l,0,o,n])),l+=o;return a}(t,e,l.value)},t.src=e.value}}return{base64:e,onFileInput:function(t){const n=t.target.files[0];if(n){const t=new FileReader;t.addEventListener("load",(()=>{var n;e.value=(null==(n=t.result)?void 0:n.toString())||null,u()})),t.readAsDataURL(n)}},width:a,height:l,ratio:o,coverWidth:i,hasSpine:r,spineWidth:s,generatedBase64:p,extract:u}}});const x={key:0},f=l("b",null,"Width:",-1),y=l("b",null,"Height:",-1),b=l("b",null,"Cover width:",-1),C=l("b",null,"Has spine:",-1),R=l("b",null,"Spine width:",-1),U={style:{"margin-top":"25px"}},j=l("div",null,[l("b",null,"Aspect ratio")],-1),L=l("h3",{style:{"margin-top":"25px","margin-bottom":"5px"}},"Result",-1),M=l("div",{style:{"margin-bottom":"25px",opacity:"0.75"}}," Right-click -> save image as ",-1),k={style:{padding:"10px",background:"green",display:"flex","justify-content":"center"}},F={id:"canvas"};w.render=function(e,t,n,h,v,g){return d(),a(p,null,[l("input",{style:{"margin-bottom":"25px"},accept:"image/jpeg, image/png",type:"file",onChange:t[1]||(t[1]=(...t)=>e.onFileInput&&e.onFileInput(...t))},null,32),e.base64&&e.width&&e.height?(d(),a("div",x,[l("img",{style:{"max-width":"500px","margin-bottom":"25px"},src:e.base64},null,8,["src"]),l("div",null,[f,o(" "+i(e.width),1)]),l("div",null,[y,o(" "+i(e.height),1)]),l("div",null,[b,o(" "+i(Math.round(e.coverWidth)),1)]),l("div",null,[C,o(" "+i(e.hasSpine?"yes":"no"),1)]),l("div",null,[R,o(" "+i(e.hasSpine?Math.round(e.spineWidth):"-"),1)]),l("div",U,[j,r(l("input",{placeholder:"Set aspect ratio","onUpdate:modelValue":t[2]||(t[2]=t=>e.ratio=t),type:"text",style:{"margin-bottom":"25px"}},null,512),[[s,e.ratio,void 0,{number:!0}]]),l("button",{onClick:t[3]||(t[3]=(...t)=>e.extract&&e.extract(...t))},"Update")]),L,M,l("div",k,[(d(!0),a(p,null,u(e.generatedBase64,(e=>(d(),a("img",{key:e,style:{"margin-right":"10px","max-height":"500px"},src:e},null,8,["src"])))),128))])])):c("",!0),r(l("canvas",F,null,512),[[m,!1]])],64)};var S=e({name:"App",components:{Cropper:w}});const B={style:{display:"flex","flex-flow":"column wrap","justify-content":"center"}},I=l("div",{style:{"text-align":"center"}},[l("h3",{style:{"margin-bottom":"5px"}},"DVD Cropper")],-1),W=l("div",{style:{"text-align":"center","margin-bottom":"20px",opacity:"0.8"}},[l("a",{target:"blank",href:"https://github.com/porn-vault/dvd-cropper"},[l("svg",{style:{width:"24px",height:"24px","margin-right":"20px"},role:"img",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[l("title",null,"View source"),l("path",{d:"M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"})])]),l("a",{target:"blank",href:"https://www.patreon.com/pornvault"},[l("svg",{style:{width:"24px",height:"24px"},role:"img",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[l("title",null,"Support on Patreon"),l("path",{d:"M0 .48v23.04h4.22V.48zm15.385 0c-4.764 0-8.641 3.88-8.641 8.65 0 4.755 3.877 8.623 8.641 8.623 4.75 0 8.615-3.868 8.615-8.623C24 4.36 20.136.48 15.385.48z"})])])],-1),D={style:{"text-align":"center"}};S.render=function(e,t,n,o,i,r){const s=h("cropper");return d(),a("div",B,[I,W,l("div",D,[l(s)])])},v(S).mount("#app");
